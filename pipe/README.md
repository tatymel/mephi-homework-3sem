# Shell

Это продолжение предыдущей задачи. Нужно поддержать пайплайны.
Пайплайн это конструкция вида:

```console
$ {command_1} | {command_2} | ... | {command_n}
```

Здесь `{command}` - команда в смысле прошлых задач, `|` - символ, называемый пайпом.

Примеры:

```console
$ cat < in.txt | head -c 10 | wc -l > out.txt
$ echo hello |tail -n 10|wc -c
```

Принцип работы:

* Stdout подпроцесса первой команды подаётся на stdin подпроцессу второй, stdout второй на stdin третьей и т.д.
* Подпроцесс первой команды берёт stdin либо из файла, указанного перепаравлением stdin, либо из stdin шелла, если перенаправление не указано
* Аналогично, подпроцесс последней команды выводит stdout либо в файл, указанный перенаправлением stdout, либо в stdout шелла, если перенаправление не указано

Требования:

* Перенаправление stdin можно указывать только у первой команды пайплайна, перенаправление stdout - только у последней
* Символ пайпа может как отделяться пробелом от следующего слова, так и не отделяться (от прошлого слова в нашей реализации шелла он всегда отделяется пробелом)
* Если хотя бы одна команда в пайплайне не является валидной в смысле прошлой задачи, выведите `Syntax error`
* Если перенаправление stdin встречается в рамках какой-либо команды, кроме первой, выведите `Syntax error`
* Если перенаправление stdout встречается в рамках какой-либо команды, кроме последней, выведите `Syntax error`
* Если вы обнаружили `Syntax error`, то не надо выводить `I/O error`

Примечания:

* Чтобы связать stdin одного подпроцесса с stdout другого, используйте системные вызовы `pipe` и `dup2`;
* Обратите внимание, что в родительском процессе необходимо закрывать файловые дескрипторы, соответствующие больше не нужным в рамках данного процесса концам пайпов. Если их не закрывать, то:
    - начнут течь файловые дескрипторы (их количество на процесс ограничено)
    - запущенные в пайплайне команды могут зависать, до тех пор, хотя бы у одного процесса есть незакрытый write-конец пайпа, читающий из read-конца не получит EOF.

## Токенизатор

Появился новый тип токена - `TT_PIPE`.
